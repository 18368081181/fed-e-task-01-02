# 函数式编程

*函数是一等公民的含义：*
1、函数可以作为变量的值
2、函数可以作为参数 （例：filter，forEach方法）
3、函数可以作为返回值  （***once方法，生成一个只能执行一次的函数***）（***处理试算下单缴费等业务时，once会十分有用***）

*高阶函数*
返回一个函数即为高阶函数
React中高阶组件、Array的map、filter、some等都是高阶函数

*什么是“闭包（Closure）”*
函数和其周围的状态（词法环境）的引用捆绑在一起形成闭包
其本质是：函数在执行的时候会放到一个执行栈上， 执行完成之后，该函数会从执行栈上移除。但是堆上的作用域成员因为外部的引用而不能释放，因此，内部函数依然可以访问外部函数的成员。

*纯函数是什么*
1、相同的输入始终得到相同的输出
2、没有副作用 （副作用来源：配置文件、数据库、用户输入等等）

*纯函数的优点*
1、结果可缓存（因为相同的输入总是得到相同的输出）（***_.memoize 记忆函数，用于缓存***）
2、可测试（因为永远有输入和输出）
3、并行处理（因为纯函数只依赖参数，没有副作用）

# JS性能优化

可达对象

*常见GC算法：*
1、引用计数（发现垃圾立即回收，最大限度减少程序暂停；无法回收循环引用的对象，时间开销大）
2、标记清除（可以清除循环引用的对象，不能立即回收垃圾；存在地址不连续的问题，即空间碎片化）
3、标记整理（标记清除强化版，解决了空间碎片化的问题）
4、复制算法

*V8引擎*
特点包括：
1、即时编译
2、可设内存上限

*V8垃圾回收所采用到的算法包括：*（***V8GC采用的策略是什么***）
1、分代回收
2、空间复制
3、标记清除
4、标记整理
5、标记增量

*内存问题的外在表现：*
1、页面出现延迟加载或经常性暂停
2、页面持续出现糟糕的状态
3、页面的性能随时间延长越来越差（***内存泄漏，有印象的是美剧天堂视频加载会越来越慢***）

*内存存在问题的标准：*
1、内存泄漏
2、内存膨胀
3、频繁的垃圾回收

*监控内存的几种方式：*
1、浏览器任务管理器（shif+esc，主要观察的是DOM节点内存和JS堆内存）
2、Timeline（使用Performance工具）
3、堆快照查找分离DOM（使用Memory工具）
4、判断是否存在频繁的垃圾回收（Timeline频繁升降）

*代码优化* （***使用JSperf精准测试代码***）
1、慎用全局变量（比如遍历中使用let i替代var i）
2、缓存全局变量（比如缓存document）
3、通过原型对象给实例添加附加方法
4、避免闭包陷阱
5、避免属性访问方法使用
6、for循环优化（使用变量保存遍历长度）
7、选择最优的遍历方法（foreach优于for和forin）
8、文档碎片化节点添加（createDocumentFragment？没见过）
9、克隆优化节点操作

